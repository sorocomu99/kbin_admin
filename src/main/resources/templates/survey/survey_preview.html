<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <!-- <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KB Innovation HUB</title>

    <!-- 공통 스타일 시트 -->
    <link rel="stylesheet" th:href="@{/css/swiper-bundle.min.css}">
    <link rel="stylesheet" th:href="@{/css/flatpickr.min.css}">
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/board.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/sub.css}">

    <!-- 임시 스크립트: 헤더/푸터 컴포넌트 (작업용 임시 파일이므로 개발단계부터는 스크립트 파일 안에 HTML 코드 사용) -->
    <script th:src="@{/component/header_preview.js}"></script>
    <script th:src="@{/component/footer_preview.js}"></script>
    <script>
        const ENV = 'dev'
    </script>

    <!-- 공통 스크립트 -->
    <script th:src="@{/js/scrollreveal.min.js}"></script>
    <script th:src="@{/js/gsap.min.js}"></script>
    <script th:src="@{/js/ScrollToPlugin.min.js}"></script>
    <script th:src="@{/js/ScrollTrigger.min.js}"></script>
    <script th:src="@{/js/lenis.min.js}"></script>
    <script th:src="@{/js/split-type.min.js}"></script>
    <script th:src="@{/js/echarts.min.js}"></script>
    <script th:src="@{/js/echarts-wordcloud.min.js}"></script>
    <script th:src="@{/js/flatpickr.js}"></script>
    <script th:src="@{/js/ko.js}"></script>
    <script th:src="@{/js/swiper-bundle.min.js}"></script>
    <script th:src="@{/js/countUp.umd.js}"></script>
    <script th:src="@{/js/common.js}"></script>
    <script th:src="@{/js/jquery-3.6.4.min.js}"></script>
</head>
<body>
<!-- 헤더 -->
<app-header></app-header>

<!-- 본문 -->
<main class="main">
    <th:block th:each="question : ${survey.data}">
        <th:block th:if="${question.question_type_no == 1}">
            <div class="apply">
                <div class="apply-image">
                    <img th:src="${'/kbinnovationhub_devadm/survey/banner?filename=' + surveyDefaultData.banner_filename}" alt="">
                </div>
                <div class="apply-contents">
                    <!--
                       다음으로 버튼 클릭 후 항목에 미 체크되어 있으면 form 태그에 need-invalid 클래스 추가 해주세요.
                       기본상태는 클래스 비워주시면 됩니다.
                   -->
                    <form class="need-invalid" id="applyForm">
                        <!-- 기본 상태 <form> -->
                        <div class="context">
                            <!-- 질문 -->
                            <h1 class="h5" th:text="${questionInfo.rnum}+'. '+${questionInfo.srvy_qstn}"></h1>
                            <!-- 상세내용 -->
                            <p th:text="${questionInfo.srvy_dtl_qstn}"></p>
                            <!-- 주관식 -->
                            <input class="input" type="text" name="rspns_cn">
                            <!-- 유효성 체크 문구(form 태그에 need-invalid 클래스가 있으면 아래 문구가 나타납니다) -->
                            <div class="invalid-feedback"><i class="icon icon-danger"></i>항목을 입력해주세요.</div>
                        </div>

                        <input type="hidden" name="rnum" th:value="${questionInfo.rnum}">
                        <input type="hidden" name="conm" th:value="${conm}">
                        <input type="hidden" name="questCnt" th:value="${questCnt}">
                        <input type="hidden" name="currentCnt" th:value="${currentCnt}">
                        <input type="hidden" name="srvy_sn" th:value="${srvy_sn}">
                        <input type="hidden" name="srvy_qstn_sn" th:value="${questionInfo.srvy_qstn_sn}">
                        <input type="hidden" name="srvy_ans_sn" value="">
                        <div class="bottom-button">
                            <button class="button button-border" onclick="checkEnd()"><span>다음으로</span> <i class="icon icon-chevron-right"></i></button>
                        </div>

                        <div id="modalComplete" class="modal-container">
                            <div class="modal-wrapper">
                                <div class="modal">
                                    <div class="modal-body">
                                        <p class="heading">제출하기</p>
                                        <p class="title p5">모든 접수 단계가 완료되었습니다.</p>
                                        <p class="p">최종 제출 하시겠습니까? <br>예를 누르면, 입력 내용으로 최종 접수됩니다.</p>
                                        <div class="button-wrap">
                                            <button class="button button-border" type="button" onclick="closeModal('modalComplete')">아니오</button>
                                            <button class="button button-primary" type="button" onclick="finalSubmit()">예</button>
                                        </div>
                                    </div>
                                    <div class="modal-foot">
                                        <a class="close" href="javascript:void(0);" onclick="closeModal('modalComplete')"><span class="blind">팝업 닫기</span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </th:block>
        <th:block th:if="${question.question_type_no == 2}">

        </th:block>
        <th:block th:if="${question.question_type_no == 3}">

        </th:block>
        <th:block th:if="${question.question_type_no == 4}">

        </th:block>
    </th:block>
</main>

<!-- 푸터 -->
<app-footer></app-footer>

</body>
</html>